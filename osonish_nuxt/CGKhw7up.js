import{E as x}from"./D-vWSksA.js";import"./Q0Uepi9K.js";/* empty css        */import"./BRVkaU9v.js";import"./B6ZCCVaR.js";import{p as c,h as m,o as I,c as O,b as S,w,a as p,t as B,O as k}from"./BK2JPfx8.js";import{_ as A}from"./DlAUqK2U.js";const C={class:"otm-select"},E={class:"otm-item"},N={class:"otm-name"},b={__name:"OTMSelect",props:{modelValue:{type:String,default:""},otmId:{type:[Number,null],default:null},placeholder:{type:String,default:"O'quv muassasasi qidiring yoki nomini kiriting"}},emits:["update:modelValue","update:otm-id","select"],setup(i,{expose:_,emit:v}){const d=i,t=v,a=c(d.modelValue),l=c(d.otmId),r=c(!1);m(()=>d.modelValue,e=>{a.value=e}),m(()=>d.otmId,e=>{l.value=e});const f=async(e,s)=>{if(!e){s([]);return}r.value=!0;try{const n=await k.get("/otms",{params:{search:e}}),o=n.data?.data||n.data||[],y=(Array.isArray(o)?o:[o]).map(u=>({id:u.id,name:u.name,value:u.name}));s(y)}catch(n){console.error("OTM qidirishda xatolik:",n),s([])}finally{r.value=!1}},h=e=>{l.value=e.id,a.value=e.name,t("update:modelValue",e.name),t("update:otm-id",e.id),t("select",{otm_id:e.id,education_place:e.name})},g=()=>{a.value&&!l.value?(t("update:modelValue",a.value),t("update:otm-id",null)):a.value||(l.value=null,t("update:otm-id",null))},V=()=>{a.value="",l.value=null,t("update:modelValue",""),t("update:otm-id",null)};return _({searchInput:a,selectedOtmId:l,setValue:e=>{a.value=e},setOtmId:e=>{l.value=e}}),(e,s)=>{const n=x;return I(),O("div",C,[S(n,{modelValue:a.value,"onUpdate:modelValue":s[0]||(s[0]=o=>a.value=o),"fetch-suggestions":f,placeholder:i.placeholder,clearable:!0,onSelect:h,onBlur:g,onClear:V,debounce:300,size:"large",class:"w-full"},{default:w(({item:o})=>[p("div",E,[p("div",N,B(o.name),1)])]),_:1},8,["modelValue","placeholder"])])}}},F=A(b,[["__scopeId","data-v-82d59f1e"]]);export{F as _};
