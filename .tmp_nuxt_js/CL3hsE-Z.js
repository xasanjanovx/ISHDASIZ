import{i as Ee,s as ae,q as c,ax as Ge,e as qe,aU as Qe,aV as Ze,g as Ce,am as ne,h as se,E as Je,N as F,A as _e,o as p,c as I,C as f,G as ie,m as v,k as o,l as q,a as L,j as E,w as H,r as A,I as Ne,L as le,aI as re,t as Q,n as ze,p as ue,aw as et,D as Pe,aW as tt}from"./BK2JPfx8.js";import{N as ot,b as at,i as de,O as nt,P as st,d as M,Q as it,_ as lt,I as rt,E as D,V as ut,R as dt,U as pt,w as ct}from"./Q0Uepi9K.js";import{m as ft}from"./CEt7nTGC.js";import{u as mt}from"./BHWYNUKH.js";import{U as Z,I as pe,C as Me,d as ke}from"./BE20p1dL.js";import{u as vt,a as yt,b as ht,c as gt}from"./DRYPtbMC.js";import{u as bt,a as wt}from"./BfJdvYFm.js";let h;const xt={height:"0",visibility:"hidden",overflow:ot()?"":"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},St=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing","word-break"],Ve=n=>{const r=Number.parseFloat(n);return Number.isNaN(r)?n:r};function It(n){const r=window.getComputedStyle(n),w=r.getPropertyValue("box-sizing"),t=Number.parseFloat(r.getPropertyValue("padding-bottom"))+Number.parseFloat(r.getPropertyValue("padding-top")),l=Number.parseFloat(r.getPropertyValue("border-bottom-width"))+Number.parseFloat(r.getPropertyValue("border-top-width"));return{contextStyle:St.map(d=>[d,r.getPropertyValue(d)]),paddingSize:t,borderSize:l,boxSizing:w}}function Te(n,r=1,w){var t,l;h||(h=document.createElement("textarea"),((t=n.parentNode)!=null?t:document.body).appendChild(h));const{paddingSize:u,borderSize:d,boxSizing:m,contextStyle:x}=It(n);x.forEach(([y,O])=>h?.style.setProperty(y,O)),Object.entries(xt).forEach(([y,O])=>h?.style.setProperty(y,O,"important")),h.value=n.value||n.placeholder||"";let g=h.scrollHeight;const C={};m==="border-box"?g=g+d:m==="content-box"&&(g=g-u),h.value="";const b=h.scrollHeight-u;if(Ee(r)){let y=b*r;m==="border-box"&&(y=y+u+d),g=Math.max(y,g),C.minHeight=`${y}px`}if(Ee(w)){let y=b*w;m==="border-box"&&(y=y+u+d),g=Math.min(y,g)}return C.height=`${g}px`,(l=h.parentNode)==null||l.removeChild(h),h=void 0,C}const Et=at({id:{type:String,default:void 0},size:st,disabled:{type:Boolean,default:void 0},modelValue:{type:M([String,Number,Object]),default:""},modelModifiers:{type:M(Object),default:()=>({})},maxlength:{type:[String,Number]},minlength:{type:[String,Number]},type:{type:M(String),default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:M([Boolean,Object]),default:!1},autocomplete:{type:M(String),default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:Boolean,clearable:Boolean,clearIcon:{type:de,default:nt},showPassword:Boolean,showWordLimit:Boolean,wordLimitPosition:{type:String,values:["inside","outside"],default:"inside"},suffixIcon:{type:de},prefixIcon:{type:de},containerRole:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:M([Object,Array,String]),default:()=>ft({})},autofocus:Boolean,rows:{type:Number,default:2},...mt(["ariaLabel"]),inputmode:{type:M(String),default:void 0},name:String}),Ct={[Z]:n=>ae(n),input:n=>ae(n),change:(n,r)=>ae(n)&&(r instanceof Event||r===void 0),focus:n=>n instanceof FocusEvent,blur:n=>n instanceof FocusEvent,clear:()=>!0,mouseleave:n=>n instanceof MouseEvent,mouseenter:n=>n instanceof MouseEvent,keydown:n=>n instanceof Event,compositionstart:n=>n instanceof CompositionEvent,compositionupdate:n=>n instanceof CompositionEvent,compositionend:n=>n instanceof CompositionEvent},Nt=["class","style"],zt=/^on[A-Z]/,Pt=(n={})=>{const{excludeListeners:r=!1,excludeKeys:w}=n,t=c(()=>(w?.value||[]).concat(Nt)),l=Ge();return l?c(()=>{var u;return it(Object.entries((u=l.proxy)==null?void 0:u.$attrs).filter(([d])=>!t.value.includes(d)&&!(r&&zt.test(d))))}):c(()=>({}))};function Mt(n){let r;function w(){if(n.value==null)return;const{selectionStart:l,selectionEnd:u,value:d}=n.value;if(l==null||u==null)return;const m=d.slice(0,Math.max(0,l)),x=d.slice(Math.max(0,u));r={selectionStart:l,selectionEnd:u,value:d,beforeTxt:m,afterTxt:x}}function t(){if(n.value==null||r==null)return;const{value:l}=n.value,{beforeTxt:u,afterTxt:d,selectionStart:m}=r;if(u==null||d==null||m==null)return;let x=l.length;if(l.endsWith(d))x=l.length-d.length;else if(l.startsWith(u))x=u.length;else{const g=u[m-1],C=l.indexOf(g,m-1);C!==-1&&(x=C+1)}n.value.setSelectionRange(x,x)}return[w,t]}const kt=["id","name","minlength","maxlength","type","disabled","readonly","autocomplete","tabindex","aria-label","placeholder","form","autofocus","role","inputmode"],Vt=["id","name","minlength","maxlength","tabindex","disabled","readonly","autocomplete","aria-label","placeholder","form","autofocus","rows","role"],Tt="ElInput",Ft=qe({name:Tt,inheritAttrs:!1,__name:"input",props:Et,emits:Ct,setup(n,{expose:r,emit:w}){const t=n,l=w,u=Qe(),d=Pt(),m=Ze(),x=c(()=>[t.type==="textarea"?ce.b():s.b(),s.m(O.value),s.is("disabled",z.value),s.is("exceed",Re.value),{[s.b("group")]:m.prepend||m.append,[s.m("prefix")]:m.prefix||t.prefixIcon,[s.m("suffix")]:m.suffix||t.suffixIcon||t.clearable||t.showPassword,[s.bm("suffix","password-clear")]:W.value&&ee.value,[s.b("hidden")]:t.type==="hidden"},u.class]),g=c(()=>[s.e("wrapper"),s.is("focus",_.value)]),{form:C,formItem:b}=vt(),{inputId:y}=yt(t,{formItemContext:b}),O=ht(),z=gt(),s=Ce("input"),ce=Ce("textarea"),j=ne(),N=ne(),J=ue(!1),K=ue(!1),fe=ue(),U=ne(t.inputStyle),S=c(()=>j.value||N.value),{wrapperRef:Fe,isFocused:_,handleFocus:me,handleBlur:ve}=bt(S,{disabled:z,afterBlur(){var e;t.validateEvent&&((e=b?.validate)==null||e.call(b,"blur").catch(a=>ke()))}}),ye=c(()=>{var e;return(e=C?.statusIcon)!=null?e:!1}),R=c(()=>b?.validateState||""),he=c(()=>R.value&&ut[R.value]),Le=c(()=>K.value?dt:pt),Oe=c(()=>[u.style]),ge=c(()=>[t.inputStyle,U.value,{resize:t.resize}]),P=c(()=>tt(t.modelValue)?"":String(t.modelValue)),W=c(()=>t.clearable&&!z.value&&!t.readonly&&!!P.value&&(_.value||J.value)),ee=c(()=>t.showPassword&&!z.value&&!!P.value),k=c(()=>t.showWordLimit&&!!t.maxlength&&(t.type==="text"||t.type==="textarea")&&!z.value&&!t.readonly&&!t.showPassword),te=c(()=>P.value.length),Re=c(()=>!!k.value&&te.value>Number(t.maxlength)),$e=c(()=>!!m.suffix||!!t.suffixIcon||W.value||t.showPassword||k.value||!!R.value&&ye.value),Be=c(()=>!!Object.keys(t.modelModifiers).length),[He,Ae]=Mt(j);rt(N,e=>{if(De(),!k.value||t.resize!=="both"&&t.resize!=="horizontal")return;const a=e[0],{width:i}=a.contentRect;fe.value={right:`calc(100% - ${i+22-10}px)`}});const $=()=>{const{type:e,autosize:a}=t;if(!(!et||e!=="textarea"||!N.value))if(a){const i=Pe(a)?a.minRows:void 0,T=Pe(a)?a.maxRows:void 0,B=Te(N.value,i,T);U.value={overflowY:"hidden",...B},F(()=>{N.value.offsetHeight,U.value=B})}else U.value={minHeight:Te(N.value).minHeight}},De=(e=>{let a=!1;return()=>{var i;if(a||!t.autosize)return;((i=N.value)==null?void 0:i.offsetParent)===null||(setTimeout(e),a=!0)}})($),V=()=>{const e=S.value,a=t.formatter?t.formatter(P.value):P.value;!e||e.value===a||t.type==="file"||(e.value=a)},be=e=>{const{trim:a,number:i}=t.modelModifiers;return a&&(e=e.trim()),i&&(e=`${Ve(e)}`),t.formatter&&t.parser&&(e=t.parser(e)),e},oe=async e=>{if(xe.value)return;const{lazy:a}=t.modelModifiers;let{value:i}=e.target;if(a){l(pe,i);return}if(i=be(i),String(i)===P.value){t.formatter&&V();return}He(),l(Z,i),l(pe,i),await F(),(t.formatter&&t.parser||!Be.value)&&V(),Ae()},we=async e=>{let{value:a}=e.target;a=be(a),t.modelModifiers.lazy&&l(Z,a),l(Me,a,e),await F(),V()},{isComposing:xe,handleCompositionStart:Y,handleCompositionUpdate:X,handleCompositionEnd:G}=wt({emit:l,afterComposition:oe}),je=()=>{K.value=!K.value},Ke=()=>{var e;return(e=S.value)==null?void 0:e.focus()},Ue=()=>{var e;return(e=S.value)==null?void 0:e.blur()},We=e=>{J.value=!1,l("mouseleave",e)},Ye=e=>{J.value=!0,l("mouseenter",e)},Se=e=>{l("keydown",e)},Xe=()=>{var e;(e=S.value)==null||e.select()},Ie=()=>{l(Z,""),l(Me,""),l("clear"),l(pe,"")};return se(()=>t.modelValue,()=>{var e;F(()=>$()),t.validateEvent&&((e=b?.validate)==null||e.call(b,"change").catch(a=>ke()))}),se(P,e=>{if(!S.value)return;const{trim:a,number:i}=t.modelModifiers,T=S.value.value,B=(i||t.type==="number")&&!/^0\d/.test(T)?`${Ve(T)}`:T;B!==e&&(document.activeElement===S.value&&S.value.type!=="range"&&a&&B.trim()===e||V())}),se(()=>t.type,async()=>{await F(),V(),$()}),Je(()=>{!t.formatter&&t.parser,V(),F($)}),r({input:j,textarea:N,ref:S,textareaStyle:ge,autosize:_e(t,"autosize"),isComposing:xe,focus:Ke,blur:Ue,select:Xe,clear:Ie,resizeTextarea:$}),(e,a)=>(p(),I("div",{class:v([x.value,{[o(s).bm("group","append")]:e.$slots.append,[o(s).bm("group","prepend")]:e.$slots.prepend}]),style:ze(Oe.value),onMouseenter:Ye,onMouseleave:We},[f(" input "),e.type!=="textarea"?(p(),I(ie,{key:0},[f(" prepend slot "),e.$slots.prepend?(p(),I("div",{key:0,class:v(o(s).be("group","prepend"))},[q(e.$slots,"prepend")],2)):f("v-if",!0),L("div",{ref_key:"wrapperRef",ref:Fe,class:v(g.value)},[f(" prefix slot "),e.$slots.prefix||e.prefixIcon?(p(),I("span",{key:0,class:v(o(s).e("prefix"))},[L("span",{class:v(o(s).e("prefix-inner"))},[q(e.$slots,"prefix"),e.prefixIcon?(p(),E(o(D),{key:0,class:v(o(s).e("icon"))},{default:H(()=>[(p(),E(A(e.prefixIcon)))]),_:1},8,["class"])):f("v-if",!0)],2)],2)):f("v-if",!0),L("input",Ne({id:o(y),ref_key:"input",ref:j,class:o(s).e("inner")},o(d),{name:e.name,minlength:e.minlength,maxlength:e.maxlength,type:e.showPassword?K.value?"text":"password":e.type,disabled:o(z),readonly:e.readonly,autocomplete:e.autocomplete,tabindex:e.tabindex,"aria-label":e.ariaLabel,placeholder:e.placeholder,style:e.inputStyle,form:e.form,autofocus:e.autofocus,role:e.containerRole,inputmode:e.inputmode,onCompositionstart:a[0]||(a[0]=(...i)=>o(Y)&&o(Y)(...i)),onCompositionupdate:a[1]||(a[1]=(...i)=>o(X)&&o(X)(...i)),onCompositionend:a[2]||(a[2]=(...i)=>o(G)&&o(G)(...i)),onInput:oe,onChange:we,onKeydown:Se}),null,16,kt),f(" suffix slot "),$e.value?(p(),I("span",{key:1,class:v(o(s).e("suffix"))},[L("span",{class:v(o(s).e("suffix-inner"))},[!W.value||!ee.value||!k.value?(p(),I(ie,{key:0},[q(e.$slots,"suffix"),e.suffixIcon?(p(),E(o(D),{key:0,class:v(o(s).e("icon"))},{default:H(()=>[(p(),E(A(e.suffixIcon)))]),_:1},8,["class"])):f("v-if",!0)],64)):f("v-if",!0),W.value?(p(),E(o(D),{key:1,class:v([o(s).e("icon"),o(s).e("clear")]),onMousedown:le(o(re),["prevent"]),onClick:Ie},{default:H(()=>[(p(),E(A(e.clearIcon)))]),_:1},8,["class","onMousedown"])):f("v-if",!0),ee.value?(p(),E(o(D),{key:2,class:v([o(s).e("icon"),o(s).e("password")]),onClick:je,onMousedown:le(o(re),["prevent"]),onMouseup:le(o(re),["prevent"])},{default:H(()=>[(p(),E(A(Le.value)))]),_:1},8,["class","onMousedown","onMouseup"])):f("v-if",!0),k.value?(p(),I("span",{key:3,class:v([o(s).e("count"),o(s).is("outside",e.wordLimitPosition==="outside")])},[L("span",{class:v(o(s).e("count-inner"))},Q(te.value)+" / "+Q(e.maxlength),3)],2)):f("v-if",!0),R.value&&he.value&&ye.value?(p(),E(o(D),{key:4,class:v([o(s).e("icon"),o(s).e("validateIcon"),o(s).is("loading",R.value==="validating")])},{default:H(()=>[(p(),E(A(he.value)))]),_:1},8,["class"])):f("v-if",!0)],2)],2)):f("v-if",!0)],2),f(" append slot "),e.$slots.append?(p(),I("div",{key:1,class:v(o(s).be("group","append"))},[q(e.$slots,"append")],2)):f("v-if",!0)],64)):(p(),I(ie,{key:1},[f(" textarea "),L("textarea",Ne({id:o(y),ref_key:"textarea",ref:N,class:[o(ce).e("inner"),o(s).is("focus",o(_))]},o(d),{name:e.name,minlength:e.minlength,maxlength:e.maxlength,tabindex:e.tabindex,disabled:o(z),readonly:e.readonly,autocomplete:e.autocomplete,style:ge.value,"aria-label":e.ariaLabel,placeholder:e.placeholder,form:e.form,autofocus:e.autofocus,rows:e.rows,role:e.containerRole,onCompositionstart:a[3]||(a[3]=(...i)=>o(Y)&&o(Y)(...i)),onCompositionupdate:a[4]||(a[4]=(...i)=>o(X)&&o(X)(...i)),onCompositionend:a[5]||(a[5]=(...i)=>o(G)&&o(G)(...i)),onInput:oe,onFocus:a[6]||(a[6]=(...i)=>o(me)&&o(me)(...i)),onBlur:a[7]||(a[7]=(...i)=>o(ve)&&o(ve)(...i)),onChange:we,onKeydown:Se}),null,16,Vt),k.value?(p(),I("span",{key:0,style:ze(fe.value),class:v([o(s).e("count"),o(s).is("outside",e.wordLimitPosition==="outside")])},Q(te.value)+" / "+Q(e.maxlength),7)):f("v-if",!0)],64))],38))}});var Lt=lt(Ft,[["__file","/home/runner/work/element-plus/element-plus/packages/components/input/src/input.vue"]]);const Kt=ct(Lt);export{Kt as E,Et as i,Pt as u};
